<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <!-- Ensure proper scaling and disable zoom -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
  <!-- Apple meta tags for full-screen web app mode -->
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <title>My Valentine's Surprise</title>
  
  <!-- Google Fonts for modern typography -->
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Roboto:wght@400;500&display=swap" rel="stylesheet">
  
  <!-- Swiper CSS for main and nested sliders -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.css" />
  
  <style>
    /*---------------------------------------------------
      CSS Variables & Basic Reset
    ---------------------------------------------------*/
    :root {
      --slide1-start: #ffafbd;       /* Soft pink */
      --slide1-end:   #ffc3a0;         /* Light peach */
      --slide2-start: #a18cd1;         /* Soft lavender */
      --slide2-end:   #fbc2eb;         /* Light lavender */
      --slide3-start: #fccb90;         /* Soft orange-pink */
      --slide3-end:   #d57eeb;         /* Vibrant purple */
      --heart-gradient: linear-gradient(45deg, #ffafbd, #ffc3a0);
      --text-color: #fff;
      --shadow-color: rgba(0, 0, 0, 0.15);
      --transition-speed: 0.3s;
    }
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    html, body {
      width: 100%;
      height: 100%;
      background: #111;
      font-family: 'Roboto', sans-serif;
      color: var(--text-color);
      overflow: hidden;
    }
    
    /*---------------------------------------------------
      Main Swiper Container (Full-Screen Slider)
    ---------------------------------------------------*/
    .swiper {
      width: 100%;
      height: 100vh;
    }
    .swiper-slide {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 20px;
      position: relative;
      text-align: center;
    }
    
    /*---------------------------------------------------
      Slide 1 – Countdown, Hearts & Petals
    ---------------------------------------------------*/
    #slide1 {
      background: linear-gradient(135deg, var(--slide1-start), var(--slide1-end));
      overflow: hidden;
      position: relative;
    }
    #slide1 h1 {
      font-family: 'Playfair Display', serif;
      font-size: 3rem;
      margin-bottom: 20px;
      text-shadow: 1px 1px 3px rgba(0,0,0,0.3);
    }
    .countdown {
      font-size: 2rem;
      margin-bottom: 20px;
      letter-spacing: 1px;
    }
    #slide1 p {
      font-size: 1.2rem;
    }
    /* Container for animated hearts and petals */
    .heart-container, .petal-container {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      overflow: hidden;
    }
    /* Heart Element */
    .heart {
      position: absolute;
      width: 40px;
      height: 40px;
      background: var(--heart-gradient);
      clip-path: polygon(
        50% 0%, 61% 11%, 72% 22%, 80% 35%, 84% 50%,
        80% 65%, 72% 78%, 61% 89%, 50% 100%, 39% 89%,
        28% 78%, 20% 65%, 16% 50%, 20% 35%, 28% 22%, 39% 11%
      );
      animation: heartFloat 12s linear infinite;
    }
    @keyframes heartFloat {
      0%   { transform: translateY(100vh) rotate(0deg); opacity: 0; }
      15%  { opacity: 1; }
      100% { transform: translateY(-150vh) rotate(360deg); opacity: 0; }
    }
    /* Petal Element */
    .petal {
      position: absolute;
      width: 30px;
      height: 50px;
      background: radial-gradient(circle at center, #ff99cc, #ff66aa);
      clip-path: ellipse(50% 60% at 50% 40%);
      animation: petalFloat 15s linear infinite;
    }
    @keyframes petalFloat {
      0%   { transform: translateY(100vh) rotate(0deg); opacity: 0; }
      20%  { opacity: 1; }
      100% { transform: translateY(-150vh) rotate(360deg); opacity: 0; }
    }
    
    /*---------------------------------------------------
      Slide 2 – Interactive Itinerary
    ---------------------------------------------------*/
    #slide2 {
      background: linear-gradient(135deg, var(--slide2-start), var(--slide2-end));
      overflow-y: auto;
      padding-bottom: 40px;
    }
    #slide2 h1 {
      font-family: 'Playfair Display', serif;
      font-size: 2.8rem;
      margin-bottom: 20px;
    }
    .itinerary {
      max-width: 600px;
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      gap: 15px;
    }
    .itinerary details {
      background: rgba(255, 255, 255, 0.15);
      padding: 15px;
      border-radius: 12px;
      box-shadow: 0 4px 10px var(--shadow-color);
      transition: background var(--transition-speed), transform var(--transition-speed);
      cursor: pointer;
    }
    .itinerary details[open] {
      background: rgba(255, 255, 255, 0.25);
    }
    .itinerary details:hover {
      transform: scale(1.02);
    }
    .itinerary summary {
      font-size: 1.5rem;
      outline: none;
    }
    .itinerary p {
      margin-top: 10px;
      font-size: 1.2rem;
      line-height: 1.4;
    }
    
    /*---------------------------------------------------
      Slide 3 – Memories & Valentine Question
    ---------------------------------------------------*/
    #slide3 {
      background: linear-gradient(135deg, var(--slide3-start), var(--slide3-end));
    }
    #slide3 h1 {
      font-family: 'Playfair Display', serif;
      font-size: 3rem;
      margin-bottom: 20px;
    }
    .slideshow-container {
      width: 80%;
      max-width: 600px;
      margin: 0 auto 30px;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 4px 12px var(--shadow-color);
    }
    /* Nested Swiper for Memories Slider */
    .swiper-nested {
      width: 100%;
      height: 300px;
    }
    .swiper-nested .swiper-slide {
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .swiper-nested img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.5s ease;
    }
    .swiper-nested img:hover {
      transform: scale(1.05);
    }
    .ask-section h2 {
      font-family: 'Playfair Display', serif;
      font-size: 2.5rem;
      margin-bottom: 20px;
    }
    .ask-section button {
      background: #ff4081;
      border: none;
      padding: 12px 24px;
      font-size: 1.5rem;
      border-radius: 12px;
      cursor: pointer;
      transition: background var(--transition-speed);
      color: var(--text-color);
    }
    .ask-section button:hover {
      background: #e73370;
    }
    
    /* Swiper Pagination Styling */
    .swiper-pagination-bullet {
      background: rgba(255, 255, 255, 0.5);
      width: 12px;
      height: 12px;
      opacity: 1;
      transition: transform var(--transition-speed);
    }
    .swiper-pagination-bullet-active {
      background: #fff;
      transform: scale(1.2);
    }
    
    /*---------------------------------------------------
      Responsive Adjustments
    ---------------------------------------------------*/
    @media (max-width: 768px) {
      #slide1 h1 { font-size: 2.5rem; }
      .countdown { font-size: 1.8rem; }
      #slide2 h1 { font-size: 2.2rem; }
      .itinerary summary { font-size: 1.3rem; }
      #slide3 h1 { font-size: 2.5rem; }
      .ask-section h2 { font-size: 2rem; }
      .ask-section button { font-size: 1.3rem; }
    }
  </style>
</head>
<body>
  <!-- Main Swiper Container -->
  <div class="swiper mySwiper">
    <div class="swiper-wrapper">
      <!-- Slide 1: Countdown, Hearts & Petals -->
      <div class="swiper-slide" id="slide1">
        <h1>Countdown to Valentine's Day</h1>
        <div class="countdown" id="countdown"></div>
        <p>Our special week is almost here (Feb 14 – 19, 2025)</p>
        <div class="heart-container"></div>
        <!-- New container for petals -->
        <div class="petal-container"></div>
      </div>
      <!-- Slide 2: Itinerary -->
      <div class="swiper-slide" id="slide2">
        <h1>Our Valentine's Week Itinerary</h1>
        <div class="itinerary">
          <details>
            <summary>Feb 14 – Valentine's Day</summary>
            <p>Romantic dinner at our favorite restaurant. Expect a delightful surprise!</p>
          </details>
          <details>
            <summary>Feb 15 – Day 2</summary>
            <p>Morning stroll and a picnic in the park under the soft glow of sunrise.</p>
          </details>
          <details>
            <summary>Feb 16 – Day 3</summary>
            <p>Visit an art gallery followed by a creative workshop.</p>
          </details>
          <details>
            <summary>Feb 17 – Day 4</summary>
            <p>Adventure awaits: hiking, exploring scenic trails, and capturing memories.</p>
          </details>
          <details>
            <summary>Feb 18 – Day 5</summary>
            <p>A day of relaxation: spa treatments and a cozy movie night.</p>
          </details>
          <details>
            <summary>Feb 19 – Day 6</summary>
            <p>A charming farewell brunch and a heartfelt surprise gift.</p>
          </details>
        </div>
      </div>
      <!-- Slide 3: Memories & Valentine -->
      <div class="swiper-slide" id="slide3">
        <h1>Our Beautiful Memories</h1>
        <!-- Nested Swiper for Memories Slider -->
        <div class="swiper mySwiperNested swiper-nested">
          <div class="swiper-wrapper">
            <div class="swiper-slide">
              <img src="https://via.placeholder.com/800x450?text=Memory+1" alt="Memory 1">
            </div>
            <div class="swiper-slide">
              <img src="https://via.placeholder.com/800x450?text=Memory+2" alt="Memory 2">
            </div>
            <div class="swiper-slide">
              <img src="https://via.placeholder.com/800x450?text=Memory+3" alt="Memory 3">
            </div>
          </div>
          <div class="swiper-pagination"></div>
        </div>
        <div class="ask-section">
          <h2>Will You Be My Valentine?</h2>
          <button id="valentineBtn">Yes, I will!</button>
        </div>
      </div>
    </div>
    <div class="swiper-pagination"></div>
  </div>
  
  <!-- Include Swiper JS -->
  <script src="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.js"></script>
  <!-- Include GSAP for advanced animations -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/gsap.min.js"></script>
  <!-- Include Canvas Confetti for interactive effects -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  
  <script>
    /***********************
     * Initialize Main Swiper
     ***********************/
    const swiper = new Swiper(".mySwiper", {
      effect: "slide",
      speed: 600,
      pagination: {
        el: ".swiper-pagination",
        clickable: true,
      },
    });
    
    /***********************
     * Initialize Nested Swiper for Memories
     ***********************/
    const nestedSwiper = new Swiper(".mySwiperNested", {
      loop: true,
      autoplay: {
        delay: 3000,
        disableOnInteraction: false,
      },
      pagination: {
        el: ".mySwiperNested .swiper-pagination",
        clickable: true,
      },
    });
    
    /***********************
     * Countdown Timer
     ***********************/
    const countdownEl = document.getElementById("countdown");
    // Target: February 14, 2025 8:30 PM PST (ISO‑8601 format)
    const targetDateTime = new Date("2025-02-14T20:30:00-08:00").getTime();
    function updateCountdown() {
      const now = new Date().getTime();
      const distance = targetDateTime - now;
      if (distance < 0) {
        countdownEl.textContent = "It's time!";
        return;
      }
      const days = Math.floor(distance / (1000 * 60 * 60 * 24));
      const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
      const seconds = Math.floor((distance % (1000 * 60)) / 1000);
      countdownEl.textContent = `${days}d ${hours}h ${minutes}m ${seconds}s`;
    }
    setInterval(updateCountdown, 1000);
    updateCountdown();
    
    /***********************
     * Generate Random Hearts for Slide 1
     ***********************/
    const heartContainer = document.querySelector(".heart-container");
    const numHearts = 30;
    for (let i = 0; i < numHearts; i++) {
      const heart = document.createElement("div");
      heart.classList.add("heart");
      const leftPos = Math.random() * 100;
      heart.style.left = leftPos + "%";
      heart.style.top = "100%";
      const delay = Math.random() * 5;
      const duration = 10 + Math.random() * 8;
      const scale = 0.6 + Math.random() * 0.8;
      heart.style.animationDelay = delay + "s";
      heart.style.animationDuration = duration + "s";
      heart.style.transform = `rotate(45deg) scale(${scale})`;
      heartContainer.appendChild(heart);
    }
    
    /***********************
     * Generate Random Petals for Slide 1
     ***********************/
    const petalContainer = document.createElement("div");
    petalContainer.classList.add("petal-container");
    document.querySelector("#slide1").appendChild(petalContainer);
    const numPetals = 20;
    for (let i = 0; i < numPetals; i++) {
      const petal = document.createElement("div");
      petal.classList.add("petal");
      const leftPos = Math.random() * 100;
      petal.style.left = leftPos + "%";
      petal.style.top = "100%";
      const delay = Math.random() * 5;
      const duration = 12 + Math.random() * 5;
      const scale = 0.7 + Math.random() * 0.6;
      petal.style.animationDelay = delay + "s";
      petal.style.animationDuration = duration + "s";
      petal.style.transform = `scale(${scale})`;
      petalContainer.appendChild(petal);
    }
    
    /***********************
     * Itinerary Card Auto-Close & Single-Open Behavior
     ***********************/
    const detailsElements = document.querySelectorAll(".itinerary details");
    detailsElements.forEach(detail => {
      detail.addEventListener("toggle", function () {
        if (this.open) {
          detailsElements.forEach(other => {
            if (other !== this && other.open) {
              other.removeAttribute("open");
            }
          });
          // Animate the content in with GSAP
          gsap.fromTo(this.querySelector("p"), { opacity: 0, y: 20 }, { opacity: 1, y: 0, duration: 0.5 });
        }
      });
    });
    
    /***********************
     * Valentine Button with Confetti & GSAP Bounce
     ***********************/
    document.getElementById("valentineBtn").addEventListener("click", () => {
      confetti({
        particleCount: 100,
        spread: 70,
        origin: { y: 0.6 }
      });
      gsap.fromTo("#valentineBtn", { scale: 1 }, { scale: 1.2, duration: 0.2, yoyo: true, repeat: 1 });
      alert("I love you! Can't wait to share this amazing week with you!");
    });
  </script>
</body>
</html>
